{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","components/Button/Button.module.css","components/ImageGallery/ImageGallery.module.css","components/Loader/Loader.module.css","components/Initial/Initial.module.css","components/NotFound/NotFound.module.css","components/Searchbar/Searchbar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/Modal/Modal.js","components/ImageGallery/ImageGallery.js","components/Loader/Loader.js","components/images/hero.jpg","components/Initial/Initial.js","components/Button/Button.js","components/NotFound/NotFound.js","App.js","index.js","components/Searchbar/Searchbar.module.css"],"names":["module","exports","Searchbar","state","query","handleInputChange","event","setState","currentTarget","value","toLowerCase","handleSubmit","preventDefault","trim","props","onSubmit","toast","error","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","className","s","SearchForm","this","type","SearchForm_button","SearchForm_input","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryItem","webformatURL","largeImageURL","tags","onClick","ImageGalleryItem_image","src","alt","modalRoot","document","querySelector","Modal","handlekeyDown","code","onClose","handleBackDropClick","target","window","addEventListener","removeEventListener","imageModal","createPortal","overlay","modal","ImageGallery","showModal","toggleModal","handleClick","dataset","source","images","map","id","App","loader","color","height","width","Initial","hero","Button","Buttonwrapp","NotFound","searchQuery","notfoundwrapper","page","hits","status","handleSearchbarSubmit","onScroll","setTimeout","scrollBy","top","documentElement","clientHeight","behavior","handleLoadmoreButton","searchAPI","prevProps","prevState","total","fetch","then","response","ok","json","Promise","reject","Error","catch","transition","Slide","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.21538c73.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__2E3Fw\",\"ImageGalleryItem_image\":\"ImageGalleryItem_ImageGalleryItem_image__2kjNM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__OydgA\",\"modal\":\"Modal_modal__2n9nc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Buttonwrapp\":\"Button_Buttonwrapp__39WZr\",\"Button\":\"Button_Button__2fXdf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__3ixqg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Loader_loader__3m-CN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"hero\":\"Initial_hero__2g7iA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"notfoundwrapper\":\"NotFound_notfoundwrapper__17PK8\"};","import { Component } from 'react';\nimport { toast } from 'react-toastify';\nimport s from './Searchbar.module.css';\nimport '../icons/search_black_24dp.svg';\nimport PropTypes from 'prop-types';\n\nexport default class Searchbar extends Component {\n  state = {\n    query: '',\n  };\n\n  handleInputChange = event => {\n    this.setState({ query: event.currentTarget.value.toLowerCase() });\n  };\n\n  handleSubmit = event => {\n    event.preventDefault();\n\n    if (this.state.query.trim() === '') {\n      toast.error('Cannot send empty request', {\n        position: 'top-left',\n        autoClose: 2000,\n        hideProgressBar: true,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined,\n      });\n      return;\n    }\n\n    this.props.onSubmit(this.state.query);\n    this.setState({ query: '' });\n  };\n\n  render() {\n    return (\n      <header className={s.Searchbar}>\n        <form className={s.SearchForm} onSubmit={this.handleSubmit}>\n          <button type=\"submit\" className={s.SearchForm_button}>\n            {/* <span className={s.button_label}>Search</span> */}\n          </button>\n          <input\n            className={s.SearchForm_input}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            value={this.state.query}\n            onChange={this.handleInputChange}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n};","import s from './ImageGalleryItem.module.css';\nimport PropTypes from 'prop-types';\nexport default function ImageGalleryItem({\n  webformatURL,\n  largeImageURL,\n  tags,\n  onClick,\n}) {\n  return (\n    <li className={s.ImageGalleryItem}>\n      <img\n        className={s.ImageGalleryItem_image}\n        src={webformatURL}\n        alt={tags}\n        data-source={largeImageURL}\n        onClick={onClick}\n      />\n    </li>\n  );\n}\n\nImageGalleryItem.propTypes = {\n  webformatURL: PropTypes.string,\n  largeImageURL: PropTypes.string,\n  tags: PropTypes.string,\n  onClick: PropTypes.func,\n};","import s from './Modal.module.css';\nimport { createPortal } from 'react-dom';\nimport { Component } from 'react';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nexport default class Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handlekeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handlekeyDown);\n  }\n\n  handlekeyDown = event => {\n    if (event.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  handleBackDropClick = event => {\n    if (event.currentTarget === event.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    const { imageModal } = this.props;\n    return createPortal(\n      <div className={s.overlay} onClick={this.handleBackDropClick}>\n        <div className={s.modal}>\n          <img src={imageModal} alt=\"\" />\n        </div>\n      </div>,\n    modalRoot,\n    );\n  }\n}\n","import { Component } from 'react';\nimport ImageGalleryItem from '../ImageGalleryItem';\nimport s from './ImageGallery.module.css';\nimport Modal from '../Modal/Modal';\nimport PropTypes, { shape } from 'prop-types';\nexport default class ImageGallery extends Component {\n  state = {\n    showModal: false,\n    imageModal: '',\n  };\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n    }));\n  };\n\n  handleClick = event => {\n    this.setState({ imageModal: event.target.dataset.source });\n    this.toggleModal();\n  };\n\n  render() {\n    const { images } = this.props;\n    const { showModal, imageModal } = this.state;\n    // console.log(images)\n    return (\n      <>\n        <ul className={s.ImageGallery}>\n          {images.map(({ id, webformatURL, largeImageURL, tags }) => {\n            return (\n              <ImageGalleryItem\n                key={id}\n                webformatURL={webformatURL}\n                largeImageURL={largeImageURL}\n                tags={tags}\n                onClick={this.handleClick}\n              />\n            );\n          })}\n        </ul>\n        {showModal && (\n          <Modal imageModal={imageModal} onClose={this.toggleModal} />\n        )}\n      </>\n    );\n  }\n}\nImageGallery.propTypes = {\n  images: PropTypes.arrayOf(\n    shape({\n      id: PropTypes.number,\n      webformatURL: PropTypes.string,\n      largeImageURL: PropTypes.string,\n      tags: PropTypes.string,\n    }),\n  ),\n};","import \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\r\nimport { Component } from 'react';\r\nimport Loader from \"react-loader-spinner\";\r\nimport s from './Loader.module.css'\r\n\r\nexport default class App extends Component {\r\n  render() {\r\n    return (\r\n        <Loader className ={s.loader} type=\"Bars\" color=\"#3f51b5\" height={90} width={90}/>\r\n    );\r\n  }\r\n}","export default __webpack_public_path__ + \"static/media/hero.bca0950e.jpg\";","import s from './Initial.module.css'\r\nimport '../images/hero.jpg'\r\n\r\nexport default function Initial() {\r\n    return (\r\n        <div className={s.hero}>\r\n            <h1>Lets search some pictures</h1>\r\n        </div>\r\n        \r\n    )\r\n}\r\n","import s from './Button.module.css'\r\n\r\nexport default function Button({onClick}) {\r\n    return (\r\n        <div className={s.Buttonwrapp}>\r\n        <button className={s.Button} type=\"button\" onClick={onClick}>Load more</button>\r\n        </div>\r\n        \r\n    )\r\n}","import s from './NotFound.module.css'\r\n\r\n\r\n\r\nexport default function NotFound({searchQuery}) {\r\n    return (\r\n        <div className={s.notfoundwrapper}>\r\n            <h1>Image '{searchQuery}' not found!</h1>\r\n        </div>\r\n        \r\n    )\r\n}","\nimport Searchbar from './components/Searchbar';\nimport { Component } from 'react';\nimport { ToastContainer, Slide } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport ImageGallery from './components/ImageGallery';\nimport Loader from './components/Loader/Loader';\nimport Initial from './components/Initial';\nimport Button from './components/Button';\nimport NotFound from './components/NotFound/NotFound';\n\nexport default class App extends Component {\n  state = {\n    searchQuery: '',\n    page: 1,\n    hits: [],\n    error: null,\n    status: 'idle'\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    // console.log('prevState.searchQuery',prevState.searchQuery)\n    // console.log('this.state.searchQuery',this.state.searchQuery)\n    const prevSearch = prevState.searchQuery\n    const nextSearch = this.state.searchQuery\n\n    if (prevSearch !== nextSearch)\n     {\n      this.searchAPI();\n    }\n  }\n\n  handleSearchbarSubmit = searchQuery => {\n    this.setState({ searchQuery });\n  };\n\n  searchAPI(){\n      const BASE_URL ='https://pixabay.com/api/?image_type=photo&orientation=horizontal&per_page=12';\n      const API_KEY = '23976074-1864ef446645d9fee251ba638';\n\n      this.setState({status: 'pending', hits: [], total: null });\n      setTimeout(()=>{\n        return fetch(\n          `${BASE_URL}&q=${this.state.searchQuery}&page=${this.state.page}&key=${API_KEY}`,\n        )\n          .then(response => {\n            if (response.ok) {\n              return response.json();\n            }\n            return Promise.reject(new Error(`Ошибка сервиса, изображение по запросу '${this.state.searchQuery}' не найдено`))\n          })\n          .then(hits => this.setState({ ...hits, status:'resolved' }))\n          .catch(error => this.setState({ error, status:'rejected'}))\n      },500)\n      \n      if(this.state.total === 0){\n        this.setState({status:'rejected'})\n      }\n  }\n\n  onScroll = () => {\n    setTimeout(() => {\n      window.scrollBy({\n        top: document.documentElement.clientHeight,\n        behavior: 'smooth',\n      });\n    }, 1000);\n  };\n\n  handleLoadmoreButton = () => {\nthis.setState({page: this.state.page + 1});\n// console.log('клик',this.state.page )\nthis.searchAPI();\nthis.onScroll();\n  }\n  \n  render() {\n    const {status, hits, searchQuery, total } = this.state\n    return (\n      <div className=\"App\">\n        <Searchbar onSubmit={this.handleSearchbarSubmit} />\n       {status === 'idle' && <Initial/>}\n       {status === 'pending' && <Loader />}\n       {status === 'rejected' && <h1>{this.state.error}</h1>}\n       {status === 'resolved' && \n       <>\n       <ImageGallery images={hits}/>\n       <Button onClick={this.handleLoadmoreButton}/>\n       </>}\n       {total === 0 && <NotFound searchQuery={searchQuery}/>}\n       <ToastContainer transition={Slide}/>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__2FpDx\",\"SearchForm\":\"Searchbar_SearchForm__1O91N\",\"SearchForm_button\":\"Searchbar_SearchForm_button__v4oDy\",\"SearchForm_button_label\":\"Searchbar_SearchForm_button_label__1KbwB\",\"SearchForm_input\":\"Searchbar_SearchForm_input__28T7z\"};"],"sourceRoot":""}